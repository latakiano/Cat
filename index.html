<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Himalayan Empire 2026</title>
    <style>
        :root { --gold: #FFD700; --neon: #00F2FF; --bg: #020205; }
        body { margin: 0; background: var(--bg); overflow: hidden; font-family: 'Segoe UI', sans-serif; touch-action: none; color: white; }
        
        /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ (HUD) */
        #hud { position: fixed; top: 0; width: 100%; padding: 15px; display: flex; justify-content: space-around; z-index: 100; background: rgba(0,0,0,0.5); border-bottom: 2px solid var(--gold); }
        .stat { background: rgba(255,255,255,0.1); padding: 5px 15px; border-radius: 10px; font-weight: bold; border: 1px solid var(--gold); }

        /* Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù…ØªØ¬Ø± ÙˆØ§Ù„Ù‚Ø§Ø¦Ù…Ø© */
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; }
        .panel { background: #1a1a2e; padding: 30px; border-radius: 20px; border: 3px solid var(--gold); text-align: center; width: 80%; max-width: 400px; }
        .btn { padding: 12px 30px; margin: 10px; background: var(--gold); border: none; border-radius: 25px; cursor: pointer; font-weight: bold; font-size: 18px; color: #000; }
        
        /* Ø§Ù„Ù…ØªØ¬Ø± */
        #shop-panel { display: none; }
        .item { display: flex; justify-content: space-between; align-items: center; margin: 10px 0; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 10px; }
    </style>
</head>
<body>

<div id="hud">
    <div class="stat">Ø§Ù„Ù…Ø±Ø­Ù„Ø©: <span id="lvl-txt">1</span></div>
    <div class="stat">Ø§Ù„Ø°Ù‡Ø¨: <span id="gld-txt">0</span></div>
    <div class="stat">Ø§Ù„ØªØ±ØªÙŠØ¨: #<span id="rank-txt">450</span></div>
</div>

<div id="start-screen" class="overlay">
    <div class="panel">
        <h1 style="color: var(--gold)">ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹</h1>
        <button class="btn" onclick="init()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
        <button class="btn" style="background: #00F2FF" onclick="showShop()">Ø§Ù„Ù…ØªØ¬Ø±</button>
    </div>
</div>

<div id="shop-panel" class="overlay">
    <div class="panel">
        <h2>Ù…ØªØ¬Ø± Ø§Ù„Ù‚Ø·Ø· Ø§Ù„Ù…Ù„ÙƒÙŠ</h2>
        <div class="item"><span>Ù‚Ø·Ø© Ù‡Ù…Ù„Ø§ÙŠØ§ Ø³Ø±ÙŠØ¹Ø©</span><button onclick="buy(1, 100)">100 ðŸŸ¡</button></div>
        <div class="item"><span>Ù‚Ø·Ø© Ù…Ù„ÙƒÙŠØ© ØµÙ„Ø¨Ø©</span><button onclick="buy(2, 500)">500 ðŸŸ¡</button></div>
        <button class="btn" onclick="hideShop()">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById('game'), ctx = canvas.getContext('2d');
let active = false, stage = 1, gold = 0, rank = 450, frame = 0;
let player = { x: 100, y: 0, dy: 0, gravity: 0.5, jump: -9, speed: 4, type: 0 };
let coins = [], obstacles = [];

// Ù†Ø¸Ø§Ù… Ø§Ù„ØµÙˆØª (ØµÙˆØª Ù‚ÙØ² Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ)
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function playJumpSound() {
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.connect(gain); gain.connect(audioCtx.destination);
    osc.type = 'triangle'; osc.frequency.setValueAtTime(150, audioCtx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(600, audioCtx.currentTime + 0.1);
    gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
    osc.start(); osc.stop(audioCtx.currentTime + 0.1);
}

function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.onresize = resize; resize();

function init() { document.getElementById('start-screen').style.display = 'none'; active = true; player.y = 300; loop(); }
function showShop() { document.getElementById('shop-panel').style.display = 'flex'; }
function hideShop() { document.getElementById('shop-panel').style.display = 'none'; }

function buy(type, price) {
    if(gold >= price) { gold -= price; player.type = type; alert("ØªÙ… Ø§Ù„Ø´Ø±Ø§Ø¡!"); updateHUD(); }
    else { alert("Ø§Ù„Ø°Ù‡Ø¨ ØºÙŠØ± ÙƒØ§ÙÙ! Ø§Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø±Ø§Ø­Ù„."); }
}

function updateHUD() {
    document.getElementById('gld-txt').innerText = gold;
    document.getElementById('lvl-txt').innerText = stage;
    document.getElementById('rank-txt').innerText = rank;
}

// Ø§Ù„ØªØ­ÙƒÙ…
function jump() { if(active) { player.dy = player.jump; playJumpSound(); } }
window.onmousedown = jump; window.ontouchstart = jump;

function loop() {
    if(!active) return;
    frame++;
    ctx.fillStyle = "#020205"; ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡
    player.dy += player.gravity; player.y += player.dy;

    // Ø±Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
    ctx.font = "50px Arial";
    let catImg = player.type == 0 ? "ðŸˆ" : (player.type == 1 ? "ðŸˆâ€â¬›" : "ðŸ¦");
    ctx.fillText(catImg, player.x, player.y);

    // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙˆÙŠÙ†Ø² ÙˆØ§Ù„Ø°Ù‡Ø¨
    if(frame % 60 == 0) {
        coins.push({x: canvas.width, y: Math.random() * canvas.height, v: 5});
    }

    coins.forEach((c, i) => {
        c.x -= c.v;
        ctx.fillStyle = "gold"; ctx.beginPath(); ctx.arc(c.x, c.y, 10, 0, 7); ctx.fill();
        ctx.fillStyle = "white"; ctx.fillText("ðŸŸ¡", c.x-15, c.y+10);
        
        // Ø¬Ù…Ø¹ Ø§Ù„Ø°Ù‡Ø¨
        if(Math.hypot(player.x - c.x, player.y - c.y) < 40) {
            gold += 10; coins.splice(i, 1); updateHUD();
            if(rank > 1) rank--; // ØªØ­Ø³Ù† Ø§Ù„ØªØ±ØªÙŠØ¨
        }
    });

    // Ø´Ø±ÙˆØ· Ø§Ù„Ù‡Ø¨ÙˆØ· ÙˆØ§Ù„ØªØ£Ù‡Ù„
    if(frame % 2000 == 0) {
        if(gold > stage * 100) { stage++; alert("ØªØ£Ù‡Ù„Øª Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©!"); }
        else { alert("Ù„Ù… ØªØ¬Ù…Ø¹ Ø°Ù‡Ø¨ ÙƒØ§ÙÙ.. Ø³Ù‚Ø·Øª Ù„Ù…Ø±Ø­Ù„Ø© Ø£Ø¯Ù†Ù‰!"); stage = Math.max(1, stage-1); }
        updateHUD();
    }

    if(player.y > canvas.height || player.y < 0) { active = false; alert("Ø®Ø³Ø±Øª! Ø³ÙŠÙ‚Ù„ ØªØ±ØªÙŠØ¨Ùƒ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ."); rank += 10; location.reload(); }

    requestAnimationFrame(loop);
}
</script>
</body>
</html>